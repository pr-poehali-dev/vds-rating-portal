export interface BlogPost {
  id: number;
  slug: string;
  title: string;
  excerpt: string;
  content: string;
  author: string;
  date: string;
  readTime: string;
  category: string;
  tags: string[];
  image: string;
  views: number;
}

export const blogPosts: BlogPost[] = [
  {
    id: 1,
    slug: 'kak-vybrat-vps-hosting-2025',
    title: 'Как выбрать VPS хостинг в 2025 году: Полное руководство',
    excerpt: 'Подробное руководство по выбору VPS хостинга: от анализа требований проекта до сравнения провайдеров. Узнайте, на что обратить внимание при выборе виртуального сервера.',
    author: 'Команда VPS Rating',
    date: '09.11.2025',
    readTime: '8 мин',
    category: 'Руководства',
    tags: ['VPS', 'Хостинг', 'Выбор провайдера'],
    image: 'https://cdn.poehali.dev/files/blog-vps-choice.jpg',
    views: 3420,
    content: `# Как выбрать VPS хостинг в 2025 году: Полное руководство

Выбор VPS хостинга — важное решение для любого онлайн-проекта. Неправильный выбор может привести к низкой производительности, частым сбоям и лишним затратам. В этом руководстве мы расскажем, как выбрать оптимальный VPS для вашего проекта.

## Что такое VPS и зачем он нужен?

VPS (Virtual Private Server) — это виртуальный выделенный сервер с гарантированными ресурсами. В отличие от обычного shared-хостинга, VPS предоставляет полный контроль над сервером и изолированные ресурсы.

### Когда нужен VPS:

- Интернет-магазины с высокой посещаемостью (более 1000 посетителей в день)
- SaaS приложения и веб-сервисы
- Highload проекты с базами данных
- Корпоративные сайты с требованиями по безопасности
- Боты и парсеры, работающие 24/7

## Шаг 1: Определите требования проекта

### Оцените нагрузку:

Малая нагрузка (блоги, лендинги): 1-2 vCPU, 1-2 GB RAM, 10-20 GB SSD

Средняя нагрузка (интернет-магазины, корпоративные сайты): 2-4 vCPU, 4-8 GB RAM, 40-80 GB SSD/NVMe

Высокая нагрузка (highload проекты, SaaS): 4-8 vCPU, 8-16 GB RAM, 100+ GB NVMe

## Шаг 2: Выберите тип диска

**SSD (SATA)**: Скорость до 550 МБ/с, IOPS 500-1000. Подходит для небольших сайтов, блогов.

**NVMe**: Скорость до 3500 МБ/с (в 6 раз быстрее), IOPS 3000-5000. Подходит для баз данных, highload проектов.

Совет: Для проектов с активными базами данных выбирайте NVMe — разница в производительности критична.

## Шаг 3: Выберите локацию дата-центра

- Для российской аудитории: Москва, Санкт-Петербург
- Для европейской аудитории: Германия, Нидерланды, Финляндия
- Для азиатской аудитории: Сингапур, Гонконг, Токио
- Для американской аудитории: США (восточное/западное побережье)

Важно: Каждые 1000 км добавляют примерно 10 мс задержки. Для пользователя разница в 50-100 мс критична.

## Заключение

Правильный выбор VPS хостинга — это баланс между производительностью, надёжностью и стоимостью.`
  },
  {
    id: 2,
    slug: 'nvme-vs-ssd-sravnenie',
    title: 'NVMe vs SSD: В чём разница и что выбрать для VPS?',
    excerpt: 'Подробное сравнение NVMe и SSD дисков для VPS хостинга. Тесты производительности, реальные примеры и рекомендации по выбору типа диска для разных проектов.',
    author: 'Команда VPS Rating',
    date: '08.11.2025',
    readTime: '6 мин',
    category: 'Технологии',
    tags: ['NVMe', 'SSD', 'Производительность'],
    image: 'https://cdn.poehali.dev/files/blog-nvme-ssd.jpg',
    views: 2847,
    content: `# NVMe vs SSD: В чём разница и что выбрать для VPS?

Тип диска напрямую влияет на скорость работы вашего сайта или приложения. Разбираемся, чем NVMe отличается от обычного SSD и когда переплата оправдана.

## Что такое SSD и NVMe?

**SSD (SATA)**: Твердотельный накопитель, подключённый по интерфейсу SATA III. Эта технология пришла на смену HDD (жёстким дискам) в начале 2010-х.

**NVMe (Non-Volatile Memory Express)**: Протокол для подключения SSD-накопителей напрямую к шине PCI Express. Это новое поколение накопителей, которое в разы быстрее обычных SSD.

## Сравнение производительности

- SSD: Последовательное чтение 500-550 МБ/с, Случайное чтение (IOPS) 500-1000, Задержка 50-120 мкс
- NVMe: Последовательное чтение 3000-7000 МБ/с, Случайное чтение (IOPS) 3000-5000, Задержка 10-25 мкс

Вывод: NVMe до 10 раз быстрее в задачах со случайным доступом.

## Реальные тесты на VPS

### Тест 1: База данных MySQL (10 000 запросов)

SSD (SATA): 8.4 секунды, 1190 queries per second
NVMe: 2.1 секунды, 4760 queries per second

NVMe в 4 раза быстрее

### Тест 2: Загрузка WordPress (100 одновременных запросов)

SSD (SATA): 420 мс среднее время
NVMe: 140 мс среднее время

NVMe в 3 раза быстрее

## Когда нужен NVMe?

Обязательно выбирайте NVMe для:

1. Баз данных (PostgreSQL, MySQL, MongoDB)
2. E-commerce (интернет-магазины)
3. SaaS приложения
4. Docker/Kubernetes
5. Аналитика и Big Data

SSD достаточно для:

1. Блоги и лендинги
2. Небольшие корпоративные сайты
3. Dev/Test окружения

## Разница в цене

Средняя разница в стоимости VPS:

- SSD (SATA): от 150₽/мес за базовую конфигурацию
- NVMe: от 200₽/мес за базовую конфигурацию

Переплата: примерно 30-50%

Для production проектов переплата оправдана. Потеря клиентов из-за медленного сайта обойдётся дороже.

## Выводы

1. NVMe в 3-10 раз быстрее обычных SSD в реальных задачах
2. Для production проектов выбирайте NVMe
3. Переплата 30-50% оправдана увеличением производительности.`
  },
  {
    id: 3,
    slug: 'migraciya-na-vps-instrukciya',
    title: 'Миграция сайта на VPS: Пошаговая инструкция',
    excerpt: 'Подробное руководство по переносу сайта с shared-хостинга на VPS. Инструкции для WordPress, Drupal, Laravel и других CMS. Без простоев и потери данных.',
    author: 'Команда VPS Rating',
    date: '07.11.2025',
    readTime: '10 мин',
    category: 'Руководства',
    tags: ['Миграция', 'VPS', 'WordPress', 'Инструкция'],
    image: 'https://cdn.poehali.dev/files/blog-migration.jpg',
    views: 4156,
    content: `# Миграция сайта на VPS: Пошаговая инструкция

Перенос сайта на VPS может показаться сложным, но с правильным подходом это безопасный и предсказуемый процесс. В этом руководстве — пошаговый план миграции без простоев.

## Подготовка к миграции

### Шаг 1: Выберите VPS провайдера

Критерии выбора:

- Локация рядом с вашей аудиторией
- Ресурсы на 30% больше текущих (запас на рост)
- Поддержка 24/7 на русском языке
- Желателен тестовый период 7-14 дней

### Шаг 2: Создайте резервную копию

Важно: Без бэкапа не начинайте миграцию!

Что нужно скопировать:

- Все файлы сайта
- Базу данных
- Конфигурационные файлы
- SSL сертификаты
- Cron задачи

### Шаг 3: Зафиксируйте текущие настройки

Сохраните информацию:

- Версия PHP, MySQL, Node.js
- Установленные расширения PHP
- Переменные окружения
- Настройки cron
- DNS записи

## Настройка VPS

### Шаг 4: Установите панель управления

Для новичков рекомендуем:

1. ISPmanager (платная, примерно 350₽/мес)
2. VestaCP (бесплатная)
3. HestiaCP (бесплатная)

### Шаг 5: Настройте веб-сервер

Установите Nginx + PHP-FPM и MySQL. Настройте базовую конфигурацию для вашего типа проекта (WordPress, Laravel и т.д.)

## Перенос данных

### Шаг 6: Загрузите файлы на VPS

Используйте SCP, rsync или FTP/SFTP для переноса файлов с локального компьютера или старого хостинга на новый VPS.

### Шаг 7: Импортируйте базу данных

Создайте новую базу данных на VPS и импортируйте дамп из резервной копии.

### Шаг 8: Обновите конфигурацию сайта

Измените настройки подключения к базе данных в конфигурационных файлах (wp-config.php для WordPress, .env для Laravel и т.д.)

## Тестирование

### Шаг 9: Проверьте сайт через hosts-файл

Перед сменой DNS протестируйте сайт, добавив запись в hosts-файл. Так ваш браузер будет открывать сайт с нового VPS без изменения DNS.

### Шаг 10: Проверьте работоспособность

Убедитесь что:

- Главная страница открывается
- Авторизация работает
- Формы отправляются
- Изображения загружаются`
  },
  {
    id: 4,
    slug: '152-fz-chto-nuzhno-znat',
    title: '152-ФЗ для сайтов: Что нужно знать владельцам бизнеса',
    excerpt: 'Федеральный закон о персональных данных простым языком. Когда нужен хостинг с 152-ФЗ, какие штрафы за нарушение и как выбрать сертифицированный дата-центр.',
    author: 'Команда VPS Rating',
    date: '06.11.2025',
    readTime: '7 мин',
    category: 'Право',
    tags: ['152-ФЗ', 'Безопасность', 'Законодательство'],
    image: 'https://cdn.poehali.dev/files/blog-152fz.jpg',
    views: 1923,
    content: `# 152-ФЗ для сайтов: Что нужно знать владельцам бизнеса

152-ФЗ "О персональных данных" — один из важнейших законов для онлайн-бизнеса в России. Разбираемся, кому обязательно нужен сертифицированный хостинг и какие штрафы грозят за нарушения.

## Что такое 152-ФЗ?

Федеральный закон №152-ФЗ регулирует обработку персональных данных российских граждан. Закон требует, чтобы данные хранились на территории РФ в сертифицированных дата-центрах.

### Что считается персональными данными:

Однозначно персональные данные:

- ФИО
- Дата рождения
- Адрес проживания
- Номер телефона
- Email
- Паспортные данные
- СНИЛС, ИНН
- Медицинские данные
- Биометрия (фото, отпечатки)

## Кому обязательно нужен 152-ФЗ?

Обязательно нужен сертифицированный хостинг:

1. Интернет-магазины (собираете ФИО, адреса, телефоны)
2. Медицинские сервисы (запись к врачам, хранение медкарт)
3. Образовательные платформы (онлайн-школы, курсы)
4. HR платформы (рекрутинг, управление персоналом)
5. Финансовые сервисы (микрозаймы, инвестиции, страхование)
6. CRM и маркетинг (email-рассылки, база клиентов)

## Заключение

Соблюдение 152-ФЗ — обязательное требование для бизнеса, работающего с персональными данными.`
  },
  {
    id: 5,
    slug: 'ddos-zaschita-vps',
    title: 'DDoS защита для VPS: Нужна ли и как выбрать?',
    excerpt: 'Всё о DDoS атаках на VPS: типы угроз, методы защиты, сравнение решений от провайдеров. Узнайте, как защитить свой сайт от атак без переплаты.',
    author: 'Команда VPS Rating',
    date: '05.11.2025',
    readTime: '9 мин',
    category: 'Безопасность',
    tags: ['DDoS', 'Безопасность', 'Защита'],
    image: 'https://cdn.poehali.dev/files/blog-ddos.jpg',
    views: 3651,
    content: `# DDoS защита для VPS: Нужна ли и как выбрать?

DDoS атаки могут уложить ваш сайт за минуты. Разбираемся, кому критична защита от DDoS, какие методы существуют и сколько это стоит.

## Что такое DDoS атака?

DDoS (Distributed Denial of Service) — атака на сервер множеством запросов, которые перегружают ресурсы и делают сайт недоступным для реальных пользователей.

### Как это работает:

1. Злоумышленник использует ботнет (сеть заражённых компьютеров)
2. Боты отправляют массу запросов на ваш сервер
3. Сервер не справляется с нагрузкой
4. Сайт становится недоступен для пользователей

Средняя атака длится 4-6 часов, но может продолжаться днями.

## Типы DDoS атак

### 1. Volumetric атаки (объёмные)

Цель: Забить канал связи. Метод: UDP/ICMP флуд. Объём: 10-100 Гбит/с.

### 2. Protocol атаки (протокольные)

Цель: Истощить ресурсы сервера. Метод: SYN flood, Ping of Death. Эффект: CPU/RAM на 100%.

### 3. Application Layer атаки (L7)

Цель: Перегрузить веб-приложение. Метод: HTTP flood, Slowloris. Эффект: Веб-сервер падает.

## Реальная статистика DDoS

Кто чаще всего атакован:

1. E-commerce (35% всех атак)
2. Игровые сервера (28%)
3. Финансовые сервисы (18%)
4. Медиа и новости (12%)
5. SaaS платформы (7%)

Средние убытки от DDoS:

- Малый бизнес: 8 000 - 25 000 ₽ за час простоя
- Средний бизнес: 50 000 - 150 000 ₽ за час
- Крупный e-commerce: 300 000 - 1 000 000 ₽ за час

## Методы защиты от DDoS

### 1. Фильтрация на уровне сети (L3/L4)

Анализ трафика на входе в дата-центр, блокировка подозрительных IP, ограничение скорости.

Защищает от: UDP/ICMP флуд, SYN flood, Volumetric атаки.

Ограничения: Не защищает от L7 атак.

### 2. Web Application Firewall (WAF)

Анализ HTTP/HTTPS трафика, блокировка ботов и скраперов, защита от SQL-инъекций и XSS.

Защищает от: HTTP flood, Slowloris, Application-layer атаки.

Ограничения: Требует настройки под конкретное приложение.

## Заключение

DDoS защита — важный элемент безопасности для любого серьёзного проекта.`
  },
  {
    id: 6,
    slug: 'kubernetes-na-vps-2025',
    title: 'Kubernetes на VPS: Полный гайд по развертыванию в 2025',
    excerpt: 'Пошаговое руководство по установке и настройке Kubernetes кластера на VPS. От выбора конфигурации до мониторинга. Реальные примеры и best practices для production.',
    author: 'Команда VPS Rating',
    date: '10.11.2025',
    readTime: '12 мин',
    category: 'Технологии',
    tags: ['Kubernetes', 'DevOps', 'Контейнеризация', 'Production'],
    image: 'https://cdn.poehali.dev/files/blog-kubernetes.jpg',
    views: 2534,
    content: `# Kubernetes на VPS: Полный гайд по развертыванию в 2025

Kubernetes стал стандартом для оркестрации контейнеров. Разбираемся, как развернуть K8s кластер на VPS, какие ресурсы нужны и как избежать типичных ошибок.

## Зачем Kubernetes на VPS?

Kubernetes даёт:

1. **Автомасштабирование**: Автоматическое увеличение/уменьшение количества подов в зависимости от нагрузки
2. **High Availability**: Самовосстановление при падении контейнеров
3. **Оркестрация**: Управление сотнями микросервисов из одного места
4. **CI/CD интеграция**: Простое внедрение пайплайнов деплоя
5. **Декларативная конфигурация**: Инфраструктура как код (IaC)

### Когда НЕ нужен Kubernetes:

- У вас 1-2 простых приложения без микросервисов
- Команда менее 3 разработчиков
- Нет специалиста по DevOps
- Бюджет на инфраструктуру менее 15 000₽/мес

Для таких случаев достаточно Docker Compose на одном VPS.

## Минимальные требования к VPS

### Для тестового кластера (1 мастер):

- **CPU**: 2 vCPU (минимум)
- **RAM**: 4 GB (минимум)
- **Диск**: 40 GB SSD
- **Сеть**: 100 Мбит/с

Стоимость: от 400₽/мес

### Для production кластера (1 мастер + 2 воркера):

**Master Node**:
- CPU: 4 vCPU
- RAM: 8 GB
- Диск: 80 GB NVMe
- Стоимость: от 1200₽/мес

**Worker Nodes (x2)**:
- CPU: 4 vCPU
- RAM: 16 GB
- Диск: 160 GB NVMe
- Стоимость: по 2000₽/мес

Итого: 5200₽/мес за production кластер

### Рекомендации по железу:

- Используйте NVMe для etcd (база данных K8s) — скорость диска критична
- Резервируйте 30% CPU/RAM для системных процессов Kubernetes
- Для production нужен минимум 3 ноды (1 master + 2 workers)
- Все ноды должны быть в одном дата-центре (latency < 2ms)

## Пошаговая установка Kubernetes

### Шаг 1: Подготовка серверов (на всех нодах)

Обновите систему, отключите swap (K8s не работает со swap), установите containerd как container runtime.

**Важно**: Используйте Ubuntu 22.04 LTS или Debian 12 для максимальной совместимости.

### Шаг 2: Установка kubeadm, kubelet, kubectl

Установите официальные пакеты Kubernetes на все ноды кластера.

### Шаг 3: Инициализация мастер-ноды

Запустите kubeadm init с нужными параметрами, настройте kubectl для управления кластером.

После инициализации сохраните токен для подключения воркер-нод — он понадобится на следующем шаге.

### Шаг 4: Установка сетевого плагина (CNI)

Рекомендуемые CNI для VPS:

1. **Calico** (рекомендуется для production):
   - Поддержка Network Policies
   - Низкий overhead
   - Стабильная работа на VPS

2. **Flannel** (для небольших проектов):
   - Простая настройка
   - Минимальные требования к ресурсам

3. **Cilium** (для продвинутых сценариев):
   - eBPF для высокой производительности
   - Service Mesh из коробки
   - Требует Linux Kernel 4.19+

**Выбор**: Для большинства проектов выбирайте Calico — баланс между функциональностью и простотой.

### Шаг 5: Подключение worker-нод

На каждой воркер-ноде выполните команду kubeadm join с токеном, полученным при инициализации мастера.

### Шаг 6: Проверка кластера

Убедитесь, что все ноды в статусе Ready, системные поды работают, DNS работает корректно.

## Настройка Storage

### Локальное хранилище (local-path)

Установите Rancher Local Path Provisioner для автоматического создания PersistentVolumes на локальных дисках нод.

**Плюсы**: Бесплатно, высокая скорость (NVMe)
**Минусы**: Данные привязаны к конкретной ноде (при падении ноды — потеря данных)

**Когда использовать**: Логи, временные файлы, кэш

### Сетевое хранилище (NFS/Longhorn)

**Longhorn** — распределённая блочная система хранения от Rancher.

Создаёт реплики данных на разных нодах, автоматическое восстановление при падении ноды, веб-интерфейс для управления.

**Минусы**: Требует дополнительные ресурсы (500 MB RAM на ноду)

**Когда использовать**: Базы данных, важные данные приложений, stateful сервисы

## Мониторинг и логирование

### Prometheus + Grafana

Установите Prometheus для сбора метрик и Grafana для визуализации.

**Метрики для мониторинга**:
- CPU/RAM usage по нодам и подам
- Disk I/O и latency
- Network throughput
- Pod restart count
- API Server latency

### EFK Stack (Elasticsearch + Fluentd + Kibana)

Для централизованного сбора логов.

**Альтернатива**: Loki + Promtail (легковеснее, от создателей Grafana)

## Типичные ошибки и как их избежать

### 1. Недостаточно ресурсов

**Ошибка**: Запуск K8s на VPS с 2 GB RAM.

**Решение**: Минимум 4 GB для тестов, 8+ GB для production. Kubernetes сам потребляет 1-2 GB.

### 2. Отсутствие мониторинга

**Ошибка**: Развернули кластер без Prometheus.

**Последствия**: Не видите проблем до полного падения.

**Решение**: Установите Prometheus + Grafana с первого дня. Настройте алерты в Telegram/Slack.

### 3. Одна нода для production

**Ошибка**: Production на 1 ноде "для экономии".

**Последствия**: Любой сбой = полное падение сервиса.

**Решение**: Минимум 3 ноды (1 master + 2 workers). Или используйте managed Kubernetes от провайдера.

### 4. Игнорирование Security

**Ошибка**: Дефолтные настройки без RBAC и Network Policies.

**Решение**: 
- Настройте RBAC (Role-Based Access Control)
- Используйте Network Policies для изоляции подов
- Регулярно обновляйте Kubernetes и образы контейнеров
- Сканируйте образы на уязвимости (Trivy, Clair)

## Альтернативы Kubernetes

Если K8s кажется избыточным:

### K3s — легковесный Kubernetes

- В 5 раз меньше требований к ресурсам
- Один бинарник вместо множества компонентов
- Идеален для edge computing и небольших проектов
- Минимум: 1 vCPU, 512 MB RAM

### Docker Swarm

- Проще в настройке и эксплуатации
- Встроен в Docker
- Достаточно для простых сценариев
- Менее гибкий, чем K8s

### Nomad (HashiCorp)

- Оркестрация контейнеров и не-контейнеризированных приложений
- Простая архитектура
- Лучшая производительность на небольших кластерах

## Стоимость владения K8s на VPS

**Минимальная конфигурация** (тестирование):
- 1 нода: 2 vCPU, 4 GB RAM, 40 GB SSD
- Стоимость: 400₽/мес

**Рекомендуемая конфигурация** (production):
- 3 ноды: 4 vCPU, 8-16 GB RAM, 80-160 GB NVMe каждая
- Стоимость: 5000-7000₽/мес

**Экономия vs managed решения**:
- Managed Kubernetes (Яндекс, VK Cloud): от 15000₽/мес за аналогичную конфигурацию
- Экономия: до 60-70%

**Но учитывайте**:
- Время DevOps на настройку: 20-40 часов
- Время на поддержку: 10-15 часов/мес
- Managed решения включают поддержку, автообновления, бэкапы

## Заключение

Kubernetes на VPS — отличное решение для тех, кто:

- Хочет полный контроль над инфраструктурой
- Готов инвестировать время в обучение
- Имеет DevOps компетенции в команде
- Хочет сэкономить на managed решениях

Для старта рекомендую:
1. Начните с K3s на 1 ноде для изучения (400₽/мес)
2. Когда разберётесь — разверните production кластер на 3 нодах
3. Обязательно настройте мониторинг и бэкапы
4. Автоматизируйте деплой через CI/CD (GitLab CI, GitHub Actions)

**Следующий шаг**: Попробуйте развернуть тестовый кластер K3s на VPS за 400₽/мес. Это даст понимание, нужен ли вам полноценный Kubernetes.

---

**Полезные ресурсы**:
- Официальная документация Kubernetes
- K3s документация (k3s.io)
- Awesome Kubernetes (список инструментов и гайдов)
- r/kubernetes — сообщество на Reddit`
  },
  {
    id: 6,
    slug: 'kubernetes-na-vps-polnoe-rukovodstvo',
    title: 'Kubernetes на VPS: Полное руководство по развёртыванию',
    excerpt: 'Пошаговое руководство по установке и настройке Kubernetes кластера на VPS. Узнайте, как развернуть K8s с минимальными ресурсами и какие провайдеры лучше подходят для контейнеризации.',
    author: 'Команда VPS Rating',
    date: '14.11.2025',
    readTime: '12 мин',
    category: 'Технологии',
    tags: ['Kubernetes', 'Docker', 'Контейнеры', 'DevOps'],
    image: 'https://cdn.poehali.dev/files/blog-kubernetes.jpg',
    content: `# Kubernetes на VPS: Полное руководство по развёртыванию

Kubernetes (K8s) — стандарт оркестрации контейнеров для современных приложений. В этом руководстве разберём, как развернуть полноценный кластер на VPS серверах.

## Что такое Kubernetes и зачем он нужен?

Kubernetes — это платформа для автоматизации развёртывания, масштабирования и управления контейнеризированными приложениями.

### Преимущества Kubernetes:

- **Автоматическое масштабирование**: K8s автоматически увеличивает или уменьшает количество подов в зависимости от нагрузки
- **Self-healing**: Автоматический перезапуск упавших контейнеров
- **Service Discovery**: Встроенная балансировка нагрузки между подами
- **Rolling Updates**: Обновление приложений без простоя
- **Секреты и конфигурация**: Централизованное управление настройками

## Когда нужен Kubernetes на VPS?

### Kubernetes оправдан для:

1. **Микросервисная архитектура**: 5+ независимых сервисов, требующих автоматической оркестрации
2. **CI/CD пайплайны**: Автоматизация развёртывания с Jenkins/GitLab CI
3. **Highload проекты**: Необходимость быстрого горизонтального масштабирования
4. **Multi-tenant приложения**: SaaS платформы с изоляцией клиентов

### Когда Kubernetes избыточен:

- Монолитные приложения
- Проекты с 1-2 контейнерами
- Статичные сайты без динамического масштабирования
- Команда без опыта работы с K8s

Важно: Для простых проектов используйте Docker Compose — это проще и дешевле.

## Требования к VPS для Kubernetes

### Минимальные требования для тестового кластера:

**Master Node (Control Plane):**
- 2 vCPU
- 4 GB RAM
- 40 GB NVMe
- Ubuntu 22.04 LTS

**Worker Nodes (минимум 2 ноды):**
- 2 vCPU каждая
- 4 GB RAM каждая
- 40 GB NVMe каждая

**Итого минимум:** 6 vCPU, 12 GB RAM, 120 GB NVMe

### Production требования:

**Master Node:**
- 4 vCPU
- 8 GB RAM
- 80 GB NVMe

**Worker Nodes (3-5 нод):**
- 4 vCPU каждая
- 8 GB RAM каждая
- 100 GB NVMe каждая

**Итого для production:** 16-24 vCPU, 32-48 GB RAM, 380-580 GB NVMe

## Выбор провайдера VPS для Kubernetes

### Критерии выбора:

1. **NVMe диски обязательны** — K8s активно работает с etcd, требующей низкой латентности
2. **Высокая пропускная способность сети** — минимум 1 Гбит/с между нодами
3. **Поддержка частных сетей** — для безопасной коммуникации между нодами
4. **Резервное копирование** — критично для etcd
5. **Географическая близость нод** — все ноды в одном ДЦ

### Топ провайдеров для Kubernetes:

**Timeweb Cloud**
- Цена: от 950₽/мес за ноду (4 vCPU, 8 GB RAM)
- Плюсы: NVMe, частные сети, snapshots
- Минусы: Нет managed K8s

**REG.RU**
- Цена: от 1200₽/мес за ноду
- Плюсы: Managed Kubernetes включён
- Минусы: Дороже конкурентов

**Selectel**
- Цена: от 850₽/мес за ноду
- Плюсы: Managed K8s, S3 storage
- Минусы: Интерфейс сложнее для новичков

## Установка Kubernetes: пошаговая инструкция

### Шаг 1: Подготовка серверов

Обновите все ноды и установите необходимые зависимости:

\`\`\`bash
sudo apt update && sudo apt upgrade -y
sudo apt install -y apt-transport-https ca-certificates curl
\`\`\`

Отключите swap (обязательно для K8s):

\`\`\`bash
sudo swapoff -a
sudo sed -i '/ swap / s/^/#/' /etc/fstab
\`\`\`

### Шаг 2: Установка Container Runtime (containerd)

\`\`\`bash
sudo apt install -y containerd
sudo mkdir -p /etc/containerd
sudo containerd config default | sudo tee /etc/containerd/config.toml
sudo systemctl restart containerd
sudo systemctl enable containerd
\`\`\`

### Шаг 3: Установка kubeadm, kubelet, kubectl

Добавьте репозиторий Kubernetes:

\`\`\`bash
curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.28/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg

echo 'deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.28/deb/ /' | sudo tee /etc/apt/sources.list.d/kubernetes.list
\`\`\`

Установите компоненты:

\`\`\`bash
sudo apt update
sudo apt install -y kubelet kubeadm kubectl
sudo apt-mark hold kubelet kubeadm kubectl
\`\`\`

### Шаг 4: Инициализация Master Node

На master ноде выполните:

\`\`\`bash
sudo kubeadm init --pod-network-cidr=10.244.0.0/16
\`\`\`

После успешной инициализации настройте kubectl:

\`\`\`bash
mkdir -p $HOME/.kube
sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
sudo chown $(id -u):$(id -g) $HOME/.kube/config
\`\`\`

### Шаг 5: Установка сетевого плагина (Flannel)

\`\`\`bash
kubectl apply -f https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml
\`\`\`

### Шаг 6: Подключение Worker Nodes

На каждой worker ноде выполните команду join, которую вывел kubeadm init:

\`\`\`bash
sudo kubeadm join <master-ip>:6443 --token <token> --discovery-token-ca-cert-hash sha256:<hash>
\`\`\`

Проверьте статус нод на master:

\`\`\`bash
kubectl get nodes
\`\`\`

Все ноды должны быть в статусе **Ready**.

## Первое приложение в Kubernetes

### Развёртывание Nginx:

\`\`\`bash
kubectl create deployment nginx --image=nginx
kubectl expose deployment nginx --port=80 --type=NodePort
kubectl get services
\`\`\`

Проверьте доступность по NodePort.

## Мониторинг и управление

### Установка Kubernetes Dashboard:

\`\`\`bash
kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml
\`\`\`

### Установка Prometheus + Grafana для мониторинга:

\`\`\`bash
helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm install prometheus prometheus-community/kube-prometheus-stack
\`\`\`

## Стоимость содержания K8s кластера

### Минимальный кластер (dev/test):

- 3 ноды × 600₽/мес = **1800₽/мес**

### Production кластер (5 нод):

- 5 нод × 1200₽/мес = **6000₽/мес**

### Managed Kubernetes (альтернатива):

- Control Plane: бесплатно у большинства провайдеров
- Worker ноды: от 1000₽/мес за ноду
- Итого для 3 нод: **3000₽/мес**

Вывод: Managed K8s выгоднее для production.

## Типичные ошибки при развёртывании

### 1. Swap не отключен

Ошибка: \`[ERROR Swap]: running with swap on is not supported\`

Решение: \`sudo swapoff -a\` и закомментируйте swap в /etc/fstab

### 2. Недостаточно ресурсов на master

Симптомы: etcd падает, API server не отвечает

Решение: Минимум 4 GB RAM для master в production

### 3. Ноды в NotReady

Причина: Сетевой плагин не установлен или настроен неверно

Решение: Проверьте \`kubectl get pods -n kube-system\`

### 4. ImagePullBackOff

Причина: Не хватает ресурсов для скачивания образов

Решение: Увеличьте лимиты памяти на нодах

## Best practices для K8s на VPS

1. **Используйте частные сети** — весь трафик между нодами через private network
2. **Настройте backups etcd** — это критически важные данные кластера
3. **Включите RBAC** — ограничьте доступ к API server
4. **Мониторинг обязателен** — Prometheus + Grafana или аналоги
5. **Используйте Helm** — пакетный менеджер для K8s упрощает деплой
6. **Настройте Ingress Controller** — nginx-ingress для управления внешним трафиком
7. **Лимиты ресурсов** — всегда указывайте requests/limits для подов

## Заключение

Kubernetes на VPS — реальный и экономичный вариант для production проектов. Главное:

✅ Выбирайте провайдера с NVMe и частными сетями
✅ Минимум 3 ноды для production (1 master + 2 worker)
✅ Managed K8s выгоднее self-hosted для малого бизнеса
✅ Мониторинг и бэкапы etcd — обязательны

Для начала рекомендуем попробовать managed решения (Selectel, REG.RU) — это проще и надёжнее. Self-hosted K8s оправдан для крупных проектов с DevOps командой.`
  },
];

export const blogCategories = ['Все', 'Руководства', 'Технологии', 'Безопасность', 'Право'];